#!/usr/bin/env python
# Copyright (C) 2008 Michael Homer <=mwh>

import sys, os
import textwrap

# Limited to real Gobo for now; importing getGoboVariable takes too long.
path = '/Programs/Scripts/Current/Data/CommandNotFound.py'
if not os.path.exists(path):
	exit()
def log(s):
	"""Output word-wrapped text"""
	sys.stdout.write('\n'.join(textwrap.wrap(s, 80))+'\n')
exec(open(path).read())
# 'commands' is now a dict of executable=>(package, ...)
cmd = sys.argv[1]

if cmd in commands:
	packages = commands[cmd]
	if len(packages)>1:
		log('The program "%s" is not currently installed. It is available in the following packages:'%(cmd))
		log(' ' + ', '.join(packages))
		log('You can install one of these by typing (for example):')
		log(' sudo InstallPackage %s'%(packages[0]))
	else:
		log('The program "%s" is not currently installed. You can install it by typing:'%(cmd))
		log(' sudo InstallPackage %s'%(packages[0]))
		log('or')
		log(' sudo Compile %s'%(packages[0]))
else: 
	log('The program "%s" is not currently installed, and there is no known package containing it.'%(cmd))
